extends layout

block stylesheets
    link(rel='stylesheet', href='/layout.css')
    link(rel='stylesheet', href='/selection-list.css')

block content
    section#selection-container
        h1 Selection List
        p Selected Language: 
            strong#selectedLanguage Loading...

        form(action='/select', method='post')
            input(type="hidden", name="languageID", id="languageID")

            section#options-container
                .option-card.quiz
                    input(type='radio', id='quiz', name='selection', value='quiz', required)
                    label(for='quiz')
                        span.icon
                        span.option-text Quiz

                .option-card.assessment
                    input(type='radio', id='assessment', name='selection', value='assessment')
                    label(for='assessment')
                        span.icon
                        span.option-text Assessment

                .option-card.progress
                    input(type='radio', id='progress', name='selection', value='progress')
                    label(for='progress')
                        span.icon
                        span.option-text Progress Status

                .option-card.cultural
                    input(type='radio', id='cultural', name='selection', value='cultural')
                    label(for='cultural')
                        span.icon
                        span.option-text Cultural Insight

            .button-container
                button(type='submit', id='continueBtn', disabled) Continue

    script.
        document.addEventListener("DOMContentLoaded", function() {
            const selectedLanguageID = localStorage.getItem("selectedLanguageID");
            const selectedLanguageName = localStorage.getItem("selectedLanguageName") || "None";

            if (!selectedLanguageID) {
                alert("âš  No language selected! Redirecting...");
                window.location.href = "/language-list";
                return;
            }

            console.log("ðŸ”¹ Language Loaded:", selectedLanguageName, `(ID: ${selectedLanguageID})`);

            document.getElementById("selectedLanguage").innerText = selectedLanguageName;
            document.getElementById("languageID").value = selectedLanguageID;
        });

        document.querySelectorAll('input[name="selection"]').forEach(radio => {
            radio.addEventListener("change", () => {
                document.getElementById("continueBtn").disabled = false;
            });
        });
